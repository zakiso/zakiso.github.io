<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
<title>Android 之Animation动画(二)之 Property Animation的基本介绍和使用示例 - PillBlog</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">




<meta name="description" content="android training">





    <meta name="description" content="android training">
<meta name="keywords" content="android">
<meta property="og:type" content="article">
<meta property="og:title" content="Android 之Animation动画(二)之 Property Animation的基本介绍和使用示例">
<meta property="og:url" content="https://apppills.com/2014/07/24/android/api_guide/animation/property_animation/2014-07-24-PropertyAnimation-BasicUsage/index.html">
<meta property="og:site_name" content="PillBlog">
<meta property="og:description" content="android training">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://raw.githubusercontent.com/wangkuiwu/android_applets/master/api_guide/animation/property_animation/pic/01.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wangkuiwu/android_applets/master/api_guide/animation/property_animation/pic/02.png">
<meta property="og:updated_time" content="2017-04-21T11:54:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android 之Animation动画(二)之 Property Animation的基本介绍和使用示例">
<meta name="twitter:description" content="android training">
<meta name="twitter:image" content="https://raw.githubusercontent.com/wangkuiwu/android_applets/master/api_guide/animation/property_animation/pic/01.png">





<link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    
    
    
    
    

    


</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                <img src="/images/logo.png" alt height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item " href="/archives">归档</a>
            
            <a class="navbar-item " href="/about">关于</a>
            
            <a class="navbar-item " href="https://everything.apppills.com">Everything</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="Table of Contents">
                    <i class="fa fa-list"></i>
                </a>
                <div class="navbar-dropdown is-right">
                    
                    
                    
                    
                    <a class="navbar-item" href="#Property-Animation简介">1&nbsp;&nbsp;<b>Property Animation简介</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#1-Property-Animation支持的属性">1.1&nbsp;&nbsp;1. Property Animation支持的属性</a>
                    
                    
                    
                    <a class="navbar-item" href="#2-Property-Animation的工作原理">1.2&nbsp;&nbsp;2. Property Animation的工作原理</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-Property-Animation的框架">1.3&nbsp;&nbsp;3. Property Animation的框架</a>
                    
                    
                    
                    <a class="navbar-item" href="#4-Property-Animation和View-Animation的区别">1.4&nbsp;&nbsp;4. Property Animation和View Animation的区别</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Property-Animation的基本用法和示例源码">2&nbsp;&nbsp;<b>Property Animation的基本用法和示例源码</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#1-ValueAnimator的基本用法">2.1&nbsp;&nbsp;1. ValueAnimator的基本用法</a>
                    
                    
                    
                    <a class="navbar-item" href="#2-ObjectAnimator的基本用法">2.2&nbsp;&nbsp;2. ObjectAnimator的基本用法</a>
                    
                    
                    
                    <a class="navbar-item" href="#3-AnimatorSet的基本用法">2.3&nbsp;&nbsp;3. AnimatorSet的基本用法</a>
                    
                </div>
            </div>
            
            
            <a class="navbar-item" title="GitHub" href="https://github.com/ppoffice/hexo-theme-minos">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            Android 之Animation动画(二)之 Property Animation的基本介绍和使用示例
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2014-07-24T01:00:00.000Z" itemprop="datePublished">7月 24 2014</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/android/">android</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            11 分钟 read (About 1598 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <blockquote>
<p>本章介绍Android的Property Animation。</p>
</blockquote>
<blockquote>
<p><strong>目录</strong><br><strong>1</strong>. <a href="#anchor1">Property Animation简介</a><br><strong>2</strong>. <a href="#anchor2">Property Animation的基本用法和示例源码</a>  </p>
</blockquote>
<p><a name="anchor1"></a></p>
<h1 id="Property-Animation简介"><a href="#Property-Animation简介" class="headerlink" title="Property Animation简介"></a>Property Animation简介</h1><p>Property Animation是属性动画。它是在Android 3.0中才引进的，它比View Animation和Drawable Animation功能更加强大。</p>
<h2 id="1-Property-Animation支持的属性"><a href="#1-Property-Animation支持的属性" class="headerlink" title="1. Property Animation支持的属性"></a>1. Property Animation支持的属性</h2><p>在Property Animation中，可以对动画应用以下属性：<br><strong>Duration</strong>：动画的持续时间。<br><strong>TimeInterpolation</strong>：属性值的计算方式，如先快后慢。<br><strong>TypeEvaluator</strong>：根据属性的开始、结束值与TimeInterpolation计算出的因子计算出当前时间的属性值。<br><strong>Repeat Count and behavoir</strong>：重复次数与方式，如播放3次、5次、无限循环，可以此动画一直重复，或播放完时再反向播放。<br><strong>Animation sets</strong>：动画集合，即可以同时对一个对象应用几个动画，这些动画可以同时播放也可以对不同动画设置不同开始偏移。<br><strong>Frame refreash delay</strong>：多少时间刷新一次，即每隔多少时间计算一次属性值，默认为10ms，最终刷新时间还受系统进程调度与硬件的影响。  </p>
<h2 id="2-Property-Animation的工作原理"><a href="#2-Property-Animation的工作原理" class="headerlink" title="2. Property Animation的工作原理"></a>2. Property Animation的工作原理</h2><p>对于下图的动画，这个对象的X坐标在40ms内从0移动到40 pixel。默认的10ms刷新一次，这个对象会移动4次，每次移动40/4=10pixel。</p>
<p><a href="https://raw.githubusercontent.com/wangkuiwu/android_applets/master/api_guide/animation/property_animation/pic/01.png" target="_blank" rel="noopener"><img src="https://raw.githubusercontent.com/wangkuiwu/android_applets/master/api_guide/animation/property_animation/pic/01.png" alt></a></p>
<p>也可以改变属性值的改变方法，即设置不同的interpolation，在下图中运动速度先快后慢。</p>
<p><a href="https://raw.githubusercontent.com/wangkuiwu/android_applets/master/api_guide/animation/property_animation/pic/02.png" target="_blank" rel="noopener"><img src="https://raw.githubusercontent.com/wangkuiwu/android_applets/master/api_guide/animation/property_animation/pic/02.png" alt></a></p>
<h2 id="3-Property-Animation的框架"><a href="#3-Property-Animation的框架" class="headerlink" title="3. Property Animation的框架"></a>3. Property Animation的框架</h2><p>Animator<br>&nbsp;&nbsp; – &nbsp;&nbsp; ValueAnimator<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; – &nbsp;&nbsp; ObjectAnimator<br>&nbsp;&nbsp;  –  AnimatorSet<br>AnimatorInflater<br>Keyframe<br>KeyframeSet<br>PropertyValuesHolder<br>AnimatorListenerAdapter.java<br>TypeEvaluator<br>&nbsp;&nbsp; –  IntEvaluator<br>&nbsp;&nbsp; –  FloatEvaluator<br>&nbsp;&nbsp; –  ArgbEvaluator  </p>
<p>说明：<br>(01) Animator, ValueAnimator, ObjectAnimator是描述动画的核心类。其中，Animator是父类，它定义了动画开始/结束/暂停/恢复/重复等接口，并实现了公共函数。ValueAnimator和ObjectAnimator是描述动画的具体类。<br>(02) AnimatorSet是动画集合。<br>(03) AnimatorInflater是解析xml定义的动画的核心类。<br>(04) Keyframe是关键帧，通过关键帧可以实现较复杂的动画(例如，曲线运动等)。KeyframeSet是关键帧的辅助类。<br>(05) PropertyValuesHolder通常用于动画中有多个属性需要同时变化的情况。<br>(06) AnimatorUpdateListener中实现了全部的动画监听接口。但是，监听函数体都没有执行任何动作。在我们需要监听动画相应动作时，可以实现Animator提供的接口，也可以继承于AnimatorUpdateListener。<br>(07) TypeEvaluator则是动画中需要变化的属性值的计算类。Android提供了三种：用于计算int类型属性的IntEvaluator，用于计算float类型属性的FloatEvaluator，和用于计算rgb颜色类属性的ArgbEvaluator。若上面的三种均无法满足你的需求，则你可以自定义属性计算类。  </p>
<h2 id="4-Property-Animation和View-Animation的区别"><a href="#4-Property-Animation和View-Animation的区别" class="headerlink" title="4. Property Animation和View Animation的区别"></a>4. Property Animation和View Animation的区别</h2><ol>
<li><p>Property Animation的动画对象是Object类型，而View Animation仅仅适用于View对象。</p>
</li>
<li><p>View Animation动画的功能有限：它可以进行缩放和旋转，但是却无法改变背景色。</p>
</li>
<li><p>View Animation动画在变化时，仅仅改变了View的绘制位置，并没有改变View本身的实际位置。<br>比如，如果当通过View Animation让一个按钮移动到屏幕上的另一个位置时；虽然它绘制在目标位置，但是它的点击区域并没改变，还是和变化之前的点击区域一样。</p>
</li>
</ol>
<p>Property Animation就不存在上面的问题，它是确实地改变了View对象的属性。虽然，View Animation存在上述缺点；但它一个明显的有点就是使用方法更简单。在View Animation能满足你的需求时，就不需要使用Property Animation。</p>
<p><a name="anchor2"></a></p>
<h1 id="Property-Animation的基本用法和示例源码"><a href="#Property-Animation的基本用法和示例源码" class="headerlink" title="Property Animation的基本用法和示例源码"></a>Property Animation的基本用法和示例源码</h1><p>Android提供的Property Animation动画类主要有两个：ValueAnimator和ObjectAnimator。</p>
<p>点击查看: <a href="https://github.com/wangkuiwu/android_applets/tree/master/api_guide/animation/property_animation/01_basic/AnimationTest" target="_blank" rel="noopener">PropertyAnimation基本用法的完整源码</a></p>
<h2 id="1-ValueAnimator的基本用法"><a href="#1-ValueAnimator的基本用法" class="headerlink" title="1. ValueAnimator的基本用法"></a>1. ValueAnimator的基本用法</h2><p>在显示动画的具体图像之前，需要执行两步操作：<br>(01) 计算属性值。<br>(02) 根据此时的属性值执行相应的动作，如改变对象的某一属性。  </p>
<p>ValueAnimator只完成了第一步。当我们使用ValueAnimator时，需要自己完成第二步。如下示例：</p>
<pre><code>// 创建ValueAnimator动画。ofFloat()的参数是从&quot;动画开始&quot; 到 &quot;动画结束&quot;对应的值。
ValueAnimator anim2 = ValueAnimator.ofFloat(0f, (float)(view2.getHeight() - view2.getWidth()));
// 总的显示时间
anim2.setDuration(500);
// 变化模式(加速)
anim2.setInterpolator(new AccelerateInterpolator());
// 监听：每次变化时的回调函数
anim2.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
    @Override
    public void onAnimationUpdate(ValueAnimator animation) {
        // 设置view2的纵坐标y
        view2.setY((Float) animation.getAnimatedValue());
        // 更新view2
        view2.invalidate();
    }
});</code></pre><p>说明：<br>(01) view2是自定义的View试图，它是一个圆。<br>(02) 对于ValueAnimator而言，需要我们实现AnimatorUpdateListener()接口，并在接口中处理试图的位置变化。例如，view2.setY()就是用于设置view2的位置。这就是上面所说的第二步。<br>(03) onAnimationUpdate()是动画变化的回调函数。当动画发生变化时，回执行该函数。  </p>
<h2 id="2-ObjectAnimator的基本用法"><a href="#2-ObjectAnimator的基本用法" class="headerlink" title="2. ObjectAnimator的基本用法"></a>2. ObjectAnimator的基本用法</h2><p>ObjectAnimator继承于ValueAnimator。它相比于ValueAnimator，完成了第二部。下面看看ObjectAnimator的使用方法。  </p>
<pre><code>// 创建ObjectAnimator动画。view1中必须有setY方法
ObjectAnimator anim1 = ObjectAnimator.ofFloat(view1, &quot;y&quot;, 0f, (float)(view1.getHeight() - view1.getWidth()));
// 总的显示时间
anim1.setDuration(1200);
// 变化模式(弹跳)
anim1.setInterpolator(new BounceInterpolator());
// 监听：每次变化时的回调函数
anim1.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
    @Override
    public void onAnimationUpdate(ValueAnimator animation) {
        // 更新view1
        view1.invalidate();
    }
});</code></pre><p>说明<br>(01) 虽然ObjectAnimator完成了第二步。ObjectAnimator的操作对象必须有对应的set<propertyname>方法。例如，上面的示例中操作的属性是”y”，因此view1类中必须要有setY(float)函数。<br>(02) 虽然Object完成了位置的计算和设置。但是，我们还必须在onAnimationUpdate()中更新要显示的视图。  </propertyname></p>
<h2 id="3-AnimatorSet的基本用法"><a href="#3-AnimatorSet的基本用法" class="headerlink" title="3. AnimatorSet的基本用法"></a>3. AnimatorSet的基本用法</h2><p>AnimatorSet是动画集合。用于来管理多个动画的播放次序。 如下示例：</p>
<pre><code>AnimatorSet animSet = new AnimatorSet();
animSet.playTogether(anim1, anim2, anim3);// 并行
animSet.playSequentially(anim3, anim4, anim5);// 串行
animSet.start();</code></pre>
    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/android/">#android</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/2014/07/24/android/api_guide/animation/property_animation/2014-07-24-PropertyAnimation-XmlUsage/">Android 之Animation动画(三)之 Property Animation的XML属性和使用示例</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/2014/07/24/android/api_guide/animation/2014-07-24-Animation/">Android 之Animation动画(一)之 Animation介绍</a>
            
        </span>
    </div>
    
</article>




    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2019 炸鸡叔&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow has-text-black" title="GitHub" href="https://github.com/ppoffice/hexo-theme-minos">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("zh-CN");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    


<script src="/js/script.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>